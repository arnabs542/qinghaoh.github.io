---
layout: post
title:  "Random"
tag: random
---
[Rejection sampling](https://en.wikipedia.org/wiki/Rejection_sampling)

[Implement Rand10() Using Rand7()][implement-rand10-using-rand7]

{% highlight java %}
public int rand10() {
    int num = 0;
    do {
        num = (rand7() - 1) * 7 + rand7();
    } while (num > 40);
    return (num - 1) % 10 + 1;
}
{% endhighlight %}

## Shuffle

[Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher%E2%80%93Yates_shuffle)

[Shuffle an Array][shuffle-an-array]

{% highlight java %}
private int[] arr;
private int[] oldArr;

private Random rand = new Random();

public Solution(int[] nums) {
    arr = nums;
    oldArr = nums.clone();
}

/** Resets the array to its original configuration and return it. */
public int[] reset() {
    return oldArr;
}

/** Returns a random shuffling of the array. */
public int[] shuffle() {
    for (int i = 0; i < arr.length; i++) {
        swap(i, i + rand.nextInt(arr.length - i));
    }
    return arr;
}

private void swap(int i, int j) {
    int tmp = arr[i];
    arr[i] = arr[j];
    arr[j] = tmp;
}
{% endhighlight %}

[Random Flip Matrix][random-flip-matrix]

{% highlight java %}
private Map<Integer, Integer> map;  // index : real index
private Random rand;
private int rows, cols, count;

public Solution(int n_rows, int n_cols) {
    map = new HashMap<>();
    rand = new Random();
    rows = n_rows;
    cols = n_cols;
    reset();
}

public int[] flip() {
    int index = rand.nextInt(count--);

    // swaps the real index at index and count
    int tmp = map.getOrDefault(index, index);        
    map.put(index, map.getOrDefault(count, count));
    map.put(count, tmp);

    return new int[]{tmp / cols, tmp % cols};
}

public void reset() {
    // no need to clear the map
    count = rows * cols;
}
{% endhighlight %}

[implement-rand10-using-rand7]: https://leetcode.com/problems/implement-rand10-using-rand7/
[random-flip-matrix]: https://leetcode.com/problems/random-flip-matrix/
[shuffle-an-array]: https://leetcode.com/problems/shuffle-an-array/
